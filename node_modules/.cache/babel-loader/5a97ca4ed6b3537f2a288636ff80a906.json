{"ast":null,"code":"var _jsxFileName = \"/Users/charlyagudelo/Documents/proyDanny/front/src/context/UserContext.js\";\nimport React from \"react\";\nimport firebase from '../components/database/firebase';\nvar UserStateContext = React.createContext();\nvar UserDispatchContext = React.createContext();\n\nfunction userReducer(state, action) {\n  switch (action.type) {\n    case \"LOGIN_SUCCESS\":\n      return { ...state,\n        isAuthenticated: true\n      };\n\n    case \"SIGN_OUT_SUCCESS\":\n      return { ...state,\n        isAuthenticated: false\n      };\n\n    default:\n      {\n        throw new Error(`Unhandled action type: ${action.type}`);\n      }\n  }\n}\n\nfunction UserProvider({\n  children\n}) {\n  var [state, dispatch] = React.useReducer(userReducer, {\n    isAuthenticated: !!localStorage.getItem(\"id_token\")\n  });\n  return /*#__PURE__*/React.createElement(UserStateContext.Provider, {\n    value: state,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(UserDispatchContext.Provider, {\n    value: dispatch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 7\n    }\n  }, children));\n}\n\nfunction useUserState() {\n  var context = React.useContext(UserStateContext);\n\n  if (context === undefined) {\n    throw new Error(\"useUserState must be used within a UserProvider\");\n  }\n\n  return context;\n}\n\nfunction useUserDispatch() {\n  var context = React.useContext(UserDispatchContext);\n\n  if (context === undefined) {\n    throw new Error(\"useUserDispatch must be used within a UserProvider\");\n  }\n\n  return context;\n}\n\nexport { UserProvider, useUserState, useUserDispatch, userLogin, userRegistry, userRegistrySave, signOut }; // ###########################################################\n\nfunction userLogin(email, password, history, setIsLoading, setError, setAnswer) {\n  console.log(\"me llamaron?\");\n\n  if (email === '' && password === '') {\n    console.log(\"Buenas soy empty\"); //Alert.alert('Campos vacíos', 'Ingresa tu correo y contraseña', [{ style: 'destructive' }])\n  } else {\n    setError(false);\n    setIsLoading(true);\n    firebase.auth().signInWithEmailAndPassword(email, password).then(res => {\n      console.log(res);\n      console.log('User logged-in successfully!');\n      setError(null);\n      setIsLoading(false); // this.props.navigation.navigate('Post')\n\n      history.push('/app/table');\n    }).catch(error => {\n      setError(true);\n      setIsLoading(false);\n      setAnswer(true); //  Alert.alert('Error', error.message),\n\n      console.log(error);\n    });\n  }\n} //Registry\n\n\nfunction userRegistry(history) {\n  history.push('/app/registry');\n}\n\nfunction userRegistrySave(history) {\n  const requestOptions = {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': 'Bearer my-token',\n      'My-Custom-Header': 'foobar'\n    },\n    body: JSON.stringify({\n      title: 'React POST Request Example'\n    })\n  };\n  fetch('https://apiudinventarios.herokuapp.com/api/user', requestOptions).then(response => response.json()).then(data => this.setState({\n    postId: data.id\n  }), console.log('responde', postId));\n}\n\nfunction loginUser(dispatch, login, password, history, setIsLoading, setError) {\n  setError(false);\n  setIsLoading(true);\n\n  if (!!login && !!password) {\n    setTimeout(() => {\n      localStorage.setItem('id_token', 1);\n      setError(null);\n      setIsLoading(false);\n      dispatch({\n        type: 'LOGIN_SUCCESS'\n      });\n      history.push('/app/dashboard');\n    }, 2000);\n  } else {\n    dispatch({\n      type: \"LOGIN_FAILURE\"\n    });\n    setError(true);\n    setIsLoading(false);\n  }\n}\n\nfunction signOut(dispatch, history) {\n  localStorage.removeItem(\"id_token\");\n  dispatch({\n    type: \"SIGN_OUT_SUCCESS\"\n  });\n  history.push(\"/login\");\n}","map":{"version":3,"sources":["/Users/charlyagudelo/Documents/proyDanny/front/src/context/UserContext.js"],"names":["React","firebase","UserStateContext","createContext","UserDispatchContext","userReducer","state","action","type","isAuthenticated","Error","UserProvider","children","dispatch","useReducer","localStorage","getItem","useUserState","context","useContext","undefined","useUserDispatch","userLogin","userRegistry","userRegistrySave","signOut","email","password","history","setIsLoading","setError","setAnswer","console","log","auth","signInWithEmailAndPassword","then","res","push","catch","error","requestOptions","method","headers","body","JSON","stringify","title","fetch","response","json","data","setState","postId","id","loginUser","login","setTimeout","setItem","removeItem"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,iCAArB;AAEA,IAAIC,gBAAgB,GAAGF,KAAK,CAACG,aAAN,EAAvB;AACA,IAAIC,mBAAmB,GAAGJ,KAAK,CAACG,aAAN,EAA1B;;AAEA,SAASE,WAAT,CAAqBC,KAArB,EAA4BC,MAA5B,EAAoC;AAClC,UAAQA,MAAM,CAACC,IAAf;AACE,SAAK,eAAL;AACE,aAAO,EAAE,GAAGF,KAAL;AAAYG,QAAAA,eAAe,EAAE;AAA7B,OAAP;;AACF,SAAK,kBAAL;AACE,aAAO,EAAE,GAAGH,KAAL;AAAYG,QAAAA,eAAe,EAAE;AAA7B,OAAP;;AACF;AAAS;AACP,cAAM,IAAIC,KAAJ,CAAW,0BAAyBH,MAAM,CAACC,IAAK,EAAhD,CAAN;AACD;AAPH;AASD;;AAED,SAASG,YAAT,CAAsB;AAAEC,EAAAA;AAAF,CAAtB,EAAoC;AAClC,MAAI,CAACN,KAAD,EAAQO,QAAR,IAAoBb,KAAK,CAACc,UAAN,CAAiBT,WAAjB,EAA8B;AACpDI,IAAAA,eAAe,EAAE,CAAC,CAACM,YAAY,CAACC,OAAb,CAAqB,UAArB;AADiC,GAA9B,CAAxB;AAIA,sBACE,oBAAC,gBAAD,CAAkB,QAAlB;AAA2B,IAAA,KAAK,EAAEV,KAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,mBAAD,CAAqB,QAArB;AAA8B,IAAA,KAAK,EAAEO,QAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGD,QADH,CADF,CADF;AAOD;;AAED,SAASK,YAAT,GAAwB;AACtB,MAAIC,OAAO,GAAGlB,KAAK,CAACmB,UAAN,CAAiBjB,gBAAjB,CAAd;;AACA,MAAIgB,OAAO,KAAKE,SAAhB,EAA2B;AACzB,UAAM,IAAIV,KAAJ,CAAU,iDAAV,CAAN;AACD;;AACD,SAAOQ,OAAP;AACD;;AAED,SAASG,eAAT,GAA2B;AACzB,MAAIH,OAAO,GAAGlB,KAAK,CAACmB,UAAN,CAAiBf,mBAAjB,CAAd;;AACA,MAAIc,OAAO,KAAKE,SAAhB,EAA2B;AACzB,UAAM,IAAIV,KAAJ,CAAU,oDAAV,CAAN;AACD;;AACD,SAAOQ,OAAP;AACD;;AAED,SAASP,YAAT,EAAuBM,YAAvB,EAAqCI,eAArC,EAAsDC,SAAtD,EAAiEC,YAAjE,EAA+EC,gBAA/E,EAAgGC,OAAhG,G,CAEA;;AAEA,SAASH,SAAT,CAAoBI,KAApB,EAA2BC,QAA3B,EAAqCC,OAArC,EAA8CC,YAA9C,EAA4DC,QAA5D,EAAsEC,SAAtE,EAAiF;AAC/EC,EAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;;AACA,MAAIP,KAAK,KAAK,EAAV,IAAgBC,QAAQ,KAAK,EAAjC,EAAqC;AACnCK,IAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EADmC,CAEnC;AACD,GAHD,MAGO;AACLH,IAAAA,QAAQ,CAAC,KAAD,CAAR;AACAD,IAAAA,YAAY,CAAC,IAAD,CAAZ;AACA5B,IAAAA,QAAQ,CACLiC,IADH,GAEGC,0BAFH,CAE8BT,KAF9B,EAEqCC,QAFrC,EAGGS,IAHH,CAGSC,GAAD,IAAS;AACbL,MAAAA,OAAO,CAACC,GAAR,CAAYI,GAAZ;AACAL,MAAAA,OAAO,CAACC,GAAR,CAAY,8BAAZ;AACAH,MAAAA,QAAQ,CAAC,IAAD,CAAR;AACAD,MAAAA,YAAY,CAAC,KAAD,CAAZ,CAJa,CAKd;;AACCD,MAAAA,OAAO,CAACU,IAAR,CAAa,YAAb;AACD,KAVH,EAWGC,KAXH,CAWUC,KAAK,IAAI;AACfV,MAAAA,QAAQ,CAAC,IAAD,CAAR;AACAD,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACAE,MAAAA,SAAS,CAAC,IAAD,CAAT,CAHe,CAKjB;;AACIC,MAAAA,OAAO,CAACC,GAAR,CAAYO,KAAZ;AACH,KAlBH;AAmBD;AACF,C,CAED;;;AAEA,SAASjB,YAAT,CAAsBK,OAAtB,EAA8B;AAC5BA,EAAAA,OAAO,CAACU,IAAR,CAAa,eAAb;AACD;;AAED,SAASd,gBAAT,CAA0BI,OAA1B,EAAkC;AAChC,QAAMa,cAAc,GAAG;AACrBC,IAAAA,MAAM,EAAE,MADa;AAErBC,IAAAA,OAAO,EAAE;AACL,sBAAgB,kBADX;AAEL,uBAAiB,iBAFZ;AAGL,0BAAoB;AAHf,KAFY;AAOrBC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAEC,MAAAA,KAAK,EAAE;AAAT,KAAf;AAPe,GAAvB;AASFC,EAAAA,KAAK,CAAC,iDAAD,EAAoDP,cAApD,CAAL,CACCL,IADD,CACMa,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EADlB,EAECd,IAFD,CAEMe,IAAI,IAAI,KAAKC,QAAL,CAAc;AAAEC,IAAAA,MAAM,EAAEF,IAAI,CAACG;AAAf,GAAd,CAFd,EAEkDtB,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBoB,MAAxB,CAFlD;AAGC;;AAED,SAASE,SAAT,CAAmB1C,QAAnB,EAA6B2C,KAA7B,EAAoC7B,QAApC,EAA8CC,OAA9C,EAAuDC,YAAvD,EAAqEC,QAArE,EAA+E;AAC7EA,EAAAA,QAAQ,CAAC,KAAD,CAAR;AACAD,EAAAA,YAAY,CAAC,IAAD,CAAZ;;AACA,MAAI,CAAC,CAAC2B,KAAF,IAAW,CAAC,CAAC7B,QAAjB,EAA2B;AACzB8B,IAAAA,UAAU,CAAC,MAAM;AACf1C,MAAAA,YAAY,CAAC2C,OAAb,CAAqB,UAArB,EAAiC,CAAjC;AACA5B,MAAAA,QAAQ,CAAC,IAAD,CAAR;AACAD,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACAhB,MAAAA,QAAQ,CAAC;AAAEL,QAAAA,IAAI,EAAE;AAAR,OAAD,CAAR;AAEAoB,MAAAA,OAAO,CAACU,IAAR,CAAa,gBAAb;AACD,KAPS,EAOP,IAPO,CAAV;AAQD,GATD,MASO;AACLzB,IAAAA,QAAQ,CAAC;AAAEL,MAAAA,IAAI,EAAE;AAAR,KAAD,CAAR;AACAsB,IAAAA,QAAQ,CAAC,IAAD,CAAR;AACAD,IAAAA,YAAY,CAAC,KAAD,CAAZ;AACD;AACF;;AAED,SAASJ,OAAT,CAAiBZ,QAAjB,EAA2Be,OAA3B,EAAoC;AAClCb,EAAAA,YAAY,CAAC4C,UAAb,CAAwB,UAAxB;AACA9C,EAAAA,QAAQ,CAAC;AAAEL,IAAAA,IAAI,EAAE;AAAR,GAAD,CAAR;AACAoB,EAAAA,OAAO,CAACU,IAAR,CAAa,QAAb;AACD","sourcesContent":["import React from \"react\";\nimport firebase from '../components/database/firebase';\n\nvar UserStateContext = React.createContext();\nvar UserDispatchContext = React.createContext();\n\nfunction userReducer(state, action) {\n  switch (action.type) {\n    case \"LOGIN_SUCCESS\":\n      return { ...state, isAuthenticated: true };\n    case \"SIGN_OUT_SUCCESS\":\n      return { ...state, isAuthenticated: false };\n    default: {\n      throw new Error(`Unhandled action type: ${action.type}`);\n    }\n  }\n}\n\nfunction UserProvider({ children }) {\n  var [state, dispatch] = React.useReducer(userReducer, {\n    isAuthenticated: !!localStorage.getItem(\"id_token\"),\n  });\n\n  return (\n    <UserStateContext.Provider value={state}>\n      <UserDispatchContext.Provider value={dispatch}>\n        {children}\n      </UserDispatchContext.Provider>\n    </UserStateContext.Provider>\n  );\n}\n\nfunction useUserState() {\n  var context = React.useContext(UserStateContext);\n  if (context === undefined) {\n    throw new Error(\"useUserState must be used within a UserProvider\");\n  }\n  return context;\n}\n\nfunction useUserDispatch() {\n  var context = React.useContext(UserDispatchContext);\n  if (context === undefined) {\n    throw new Error(\"useUserDispatch must be used within a UserProvider\");\n  }\n  return context;\n}\n\nexport { UserProvider, useUserState, useUserDispatch, userLogin, userRegistry, userRegistrySave,signOut};\n\n// ###########################################################\n\nfunction userLogin (email, password, history, setIsLoading, setError, setAnswer) {\n  console.log(\"me llamaron?\")\n  if (email === '' && password === '') {\n    console.log(\"Buenas soy empty\");\n    //Alert.alert('Campos vacíos', 'Ingresa tu correo y contraseña', [{ style: 'destructive' }])\n  } else {\n    setError(false);\n    setIsLoading(true);\n    firebase\n      .auth()\n      .signInWithEmailAndPassword(email, password)\n      .then((res) => {\n        console.log(res)\n        console.log('User logged-in successfully!')\n        setError(null)\n        setIsLoading(false)\n       // this.props.navigation.navigate('Post')\n        history.push('/app/table')\n      })\n      .catch((error => {\n        setError(true);\n        setIsLoading(false);\n        setAnswer(true);\n\n      //  Alert.alert('Error', error.message),\n          console.log(error)\n      }));\n  }\n}\n\n//Registry\n\nfunction userRegistry(history){\n  history.push('/app/registry')\n}\n\nfunction userRegistrySave(history){\n  const requestOptions = {\n    method: 'POST',\n    headers: { \n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer my-token',\n        'My-Custom-Header': 'foobar'\n    },\n    body: JSON.stringify({ title: 'React POST Request Example' })\n};\nfetch('https://apiudinventarios.herokuapp.com/api/user', requestOptions)\n.then(response => response.json())\n.then(data => this.setState({ postId: data.id }), console.log('responde', postId) );\n}\n\nfunction loginUser(dispatch, login, password, history, setIsLoading, setError) {\n  setError(false);\n  setIsLoading(true);\n  if (!!login && !!password) {\n    setTimeout(() => {\n      localStorage.setItem('id_token', 1)\n      setError(null)\n      setIsLoading(false)\n      dispatch({ type: 'LOGIN_SUCCESS' })\n\n      history.push('/app/dashboard')\n    }, 2000);\n  } else {\n    dispatch({ type: \"LOGIN_FAILURE\" });\n    setError(true);\n    setIsLoading(false);\n  }\n}\n\nfunction signOut(dispatch, history) {\n  localStorage.removeItem(\"id_token\");\n  dispatch({ type: \"SIGN_OUT_SUCCESS\" });\n  history.push(\"/login\");\n}\n"]},"metadata":{},"sourceType":"module"}