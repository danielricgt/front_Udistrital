{"ast":null,"code":"import _slicedToArray from\"/Users/charlyagudelo/Documents/proyDanny/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"/Users/charlyagudelo/Documents/proyDanny/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React from\"react\";import firebase from'../components/database/firebase';var UserStateContext=React.createContext();var UserDispatchContext=React.createContext();function userReducer(state,action){switch(action.type){case\"LOGIN_SUCCESS\":return _objectSpread(_objectSpread({},state),{},{isAuthenticated:true});case\"SIGN_OUT_SUCCESS\":return _objectSpread(_objectSpread({},state),{},{isAuthenticated:false});default:{throw new Error(\"Unhandled action type: \".concat(action.type));}}}function UserProvider(_ref){var children=_ref.children;var _React$useReducer=React.useReducer(userReducer,{isAuthenticated:!!localStorage.getItem(\"id_token\")}),_React$useReducer2=_slicedToArray(_React$useReducer,2),state=_React$useReducer2[0],dispatch=_React$useReducer2[1];return/*#__PURE__*/React.createElement(UserStateContext.Provider,{value:state},/*#__PURE__*/React.createElement(UserDispatchContext.Provider,{value:dispatch},children));}function useUserState(){var context=React.useContext(UserStateContext);if(context===undefined){throw new Error(\"useUserState must be used within a UserProvider\");}return context;}function useUserDispatch(){var context=React.useContext(UserDispatchContext);if(context===undefined){throw new Error(\"useUserDispatch must be used within a UserProvider\");}return context;}export{UserProvider,useUserState,useUserDispatch,userLogin,signOut};// ###########################################################\nfunction userLogin(email,password,history,setIsLoading,setError,setAnswer){console.log(\"me llamaron?\");if(email===''&&password===''){console.log(\"Buenas soy empty\");//Alert.alert('Campos vacíos', 'Ingresa tu correo y contraseña', [{ style: 'destructive' }])\n}else{setError(false);setIsLoading(true);firebase.auth().signInWithEmailAndPassword(email,password).then(function(res){console.log(res);console.log('User logged-in successfully!');setError(null);setIsLoading(false);// this.props.navigation.navigate('Post')\nhistory.push('/app/table');}).catch(function(error){setError(true);setIsLoading(false);setAnswer(true);//  Alert.alert('Error', error.message),\nconsole.log(error);});}}function loginUser(dispatch,login,password,history,setIsLoading,setError){setError(false);setIsLoading(true);if(!!login&&!!password){setTimeout(function(){localStorage.setItem('id_token',1);setError(null);setIsLoading(false);dispatch({type:'LOGIN_SUCCESS'});history.push('/app/dashboard');},2000);}else{dispatch({type:\"LOGIN_FAILURE\"});setError(true);setIsLoading(false);}}function signOut(dispatch,history){localStorage.removeItem(\"id_token\");dispatch({type:\"SIGN_OUT_SUCCESS\"});history.push(\"/login\");}","map":{"version":3,"sources":["/Users/charlyagudelo/Documents/proyDanny/front/src/context/UserContext.js"],"names":["React","firebase","UserStateContext","createContext","UserDispatchContext","userReducer","state","action","type","isAuthenticated","Error","UserProvider","children","useReducer","localStorage","getItem","dispatch","useUserState","context","useContext","undefined","useUserDispatch","userLogin","signOut","email","password","history","setIsLoading","setError","setAnswer","console","log","auth","signInWithEmailAndPassword","then","res","push","catch","error","loginUser","login","setTimeout","setItem","removeItem"],"mappings":"yUAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,QAAP,KAAqB,iCAArB,CAEA,GAAIC,CAAAA,gBAAgB,CAAGF,KAAK,CAACG,aAAN,EAAvB,CACA,GAAIC,CAAAA,mBAAmB,CAAGJ,KAAK,CAACG,aAAN,EAA1B,CAEA,QAASE,CAAAA,WAAT,CAAqBC,KAArB,CAA4BC,MAA5B,CAAoC,CAClC,OAAQA,MAAM,CAACC,IAAf,EACE,IAAK,eAAL,CACE,sCAAYF,KAAZ,MAAmBG,eAAe,CAAE,IAApC,GACF,IAAK,kBAAL,CACE,sCAAYH,KAAZ,MAAmBG,eAAe,CAAE,KAApC,GACF,QAAS,CACP,KAAM,IAAIC,CAAAA,KAAJ,kCAAoCH,MAAM,CAACC,IAA3C,EAAN,CACD,CAPH,CASD,CAED,QAASG,CAAAA,YAAT,MAAoC,IAAZC,CAAAA,QAAY,MAAZA,QAAY,uBACVZ,KAAK,CAACa,UAAN,CAAiBR,WAAjB,CAA8B,CACpDI,eAAe,CAAE,CAAC,CAACK,YAAY,CAACC,OAAb,CAAqB,UAArB,CADiC,CAA9B,CADU,wDAC7BT,KAD6B,uBACtBU,QADsB,uBAKlC,mBACE,oBAAC,gBAAD,CAAkB,QAAlB,EAA2B,KAAK,CAAEV,KAAlC,eACE,oBAAC,mBAAD,CAAqB,QAArB,EAA8B,KAAK,CAAEU,QAArC,EACGJ,QADH,CADF,CADF,CAOD,CAED,QAASK,CAAAA,YAAT,EAAwB,CACtB,GAAIC,CAAAA,OAAO,CAAGlB,KAAK,CAACmB,UAAN,CAAiBjB,gBAAjB,CAAd,CACA,GAAIgB,OAAO,GAAKE,SAAhB,CAA2B,CACzB,KAAM,IAAIV,CAAAA,KAAJ,CAAU,iDAAV,CAAN,CACD,CACD,MAAOQ,CAAAA,OAAP,CACD,CAED,QAASG,CAAAA,eAAT,EAA2B,CACzB,GAAIH,CAAAA,OAAO,CAAGlB,KAAK,CAACmB,UAAN,CAAiBf,mBAAjB,CAAd,CACA,GAAIc,OAAO,GAAKE,SAAhB,CAA2B,CACzB,KAAM,IAAIV,CAAAA,KAAJ,CAAU,oDAAV,CAAN,CACD,CACD,MAAOQ,CAAAA,OAAP,CACD,CAED,OAASP,YAAT,CAAuBM,YAAvB,CAAqCI,eAArC,CAAsDC,SAAtD,CAAiEC,OAAjE,EAEA;AAEA,QAASD,CAAAA,SAAT,CAAoBE,KAApB,CAA2BC,QAA3B,CAAqCC,OAArC,CAA8CC,YAA9C,CAA4DC,QAA5D,CAAsEC,SAAtE,CAAiF,CAC/EC,OAAO,CAACC,GAAR,CAAY,cAAZ,EACA,GAAIP,KAAK,GAAK,EAAV,EAAgBC,QAAQ,GAAK,EAAjC,CAAqC,CACnCK,OAAO,CAACC,GAAR,CAAY,kBAAZ,EACA;AACD,CAHD,IAGO,CACLH,QAAQ,CAAC,KAAD,CAAR,CACAD,YAAY,CAAC,IAAD,CAAZ,CACA1B,QAAQ,CACL+B,IADH,GAEGC,0BAFH,CAE8BT,KAF9B,CAEqCC,QAFrC,EAGGS,IAHH,CAGQ,SAACC,GAAD,CAAS,CACbL,OAAO,CAACC,GAAR,CAAYI,GAAZ,EACAL,OAAO,CAACC,GAAR,CAAY,8BAAZ,EACAH,QAAQ,CAAC,IAAD,CAAR,CACAD,YAAY,CAAC,KAAD,CAAZ,CACD;AACCD,OAAO,CAACU,IAAR,CAAa,YAAb,EACD,CAVH,EAWGC,KAXH,CAWU,SAAAC,KAAK,CAAI,CACfV,QAAQ,CAAC,IAAD,CAAR,CACAD,YAAY,CAAC,KAAD,CAAZ,CACAE,SAAS,CAAC,IAAD,CAAT,CAEF;AACIC,OAAO,CAACC,GAAR,CAAYO,KAAZ,EACH,CAlBH,EAmBD,CACF,CAGD,QAASC,CAAAA,SAAT,CAAmBvB,QAAnB,CAA6BwB,KAA7B,CAAoCf,QAApC,CAA8CC,OAA9C,CAAuDC,YAAvD,CAAqEC,QAArE,CAA+E,CAC7EA,QAAQ,CAAC,KAAD,CAAR,CACAD,YAAY,CAAC,IAAD,CAAZ,CACA,GAAI,CAAC,CAACa,KAAF,EAAW,CAAC,CAACf,QAAjB,CAA2B,CACzBgB,UAAU,CAAC,UAAM,CACf3B,YAAY,CAAC4B,OAAb,CAAqB,UAArB,CAAiC,CAAjC,EACAd,QAAQ,CAAC,IAAD,CAAR,CACAD,YAAY,CAAC,KAAD,CAAZ,CACAX,QAAQ,CAAC,CAAER,IAAI,CAAE,eAAR,CAAD,CAAR,CAEAkB,OAAO,CAACU,IAAR,CAAa,gBAAb,EACD,CAPS,CAOP,IAPO,CAAV,CAQD,CATD,IASO,CACLpB,QAAQ,CAAC,CAAER,IAAI,CAAE,eAAR,CAAD,CAAR,CACAoB,QAAQ,CAAC,IAAD,CAAR,CACAD,YAAY,CAAC,KAAD,CAAZ,CACD,CACF,CAED,QAASJ,CAAAA,OAAT,CAAiBP,QAAjB,CAA2BU,OAA3B,CAAoC,CAClCZ,YAAY,CAAC6B,UAAb,CAAwB,UAAxB,EACA3B,QAAQ,CAAC,CAAER,IAAI,CAAE,kBAAR,CAAD,CAAR,CACAkB,OAAO,CAACU,IAAR,CAAa,QAAb,EACD","sourcesContent":["import React from \"react\";\nimport firebase from '../components/database/firebase';\n\nvar UserStateContext = React.createContext();\nvar UserDispatchContext = React.createContext();\n\nfunction userReducer(state, action) {\n  switch (action.type) {\n    case \"LOGIN_SUCCESS\":\n      return { ...state, isAuthenticated: true };\n    case \"SIGN_OUT_SUCCESS\":\n      return { ...state, isAuthenticated: false };\n    default: {\n      throw new Error(`Unhandled action type: ${action.type}`);\n    }\n  }\n}\n\nfunction UserProvider({ children }) {\n  var [state, dispatch] = React.useReducer(userReducer, {\n    isAuthenticated: !!localStorage.getItem(\"id_token\"),\n  });\n\n  return (\n    <UserStateContext.Provider value={state}>\n      <UserDispatchContext.Provider value={dispatch}>\n        {children}\n      </UserDispatchContext.Provider>\n    </UserStateContext.Provider>\n  );\n}\n\nfunction useUserState() {\n  var context = React.useContext(UserStateContext);\n  if (context === undefined) {\n    throw new Error(\"useUserState must be used within a UserProvider\");\n  }\n  return context;\n}\n\nfunction useUserDispatch() {\n  var context = React.useContext(UserDispatchContext);\n  if (context === undefined) {\n    throw new Error(\"useUserDispatch must be used within a UserProvider\");\n  }\n  return context;\n}\n\nexport { UserProvider, useUserState, useUserDispatch, userLogin, signOut};\n\n// ###########################################################\n\nfunction userLogin (email, password, history, setIsLoading, setError, setAnswer) {\n  console.log(\"me llamaron?\")\n  if (email === '' && password === '') {\n    console.log(\"Buenas soy empty\");\n    //Alert.alert('Campos vacíos', 'Ingresa tu correo y contraseña', [{ style: 'destructive' }])\n  } else {\n    setError(false);\n    setIsLoading(true);\n    firebase\n      .auth()\n      .signInWithEmailAndPassword(email, password)\n      .then((res) => {\n        console.log(res)\n        console.log('User logged-in successfully!')\n        setError(null)\n        setIsLoading(false)\n       // this.props.navigation.navigate('Post')\n        history.push('/app/table')\n      })\n      .catch((error => {\n        setError(true);\n        setIsLoading(false);\n        setAnswer(true);\n\n      //  Alert.alert('Error', error.message),\n          console.log(error)\n      }));\n  }\n}\n\n\nfunction loginUser(dispatch, login, password, history, setIsLoading, setError) {\n  setError(false);\n  setIsLoading(true);\n  if (!!login && !!password) {\n    setTimeout(() => {\n      localStorage.setItem('id_token', 1)\n      setError(null)\n      setIsLoading(false)\n      dispatch({ type: 'LOGIN_SUCCESS' })\n\n      history.push('/app/dashboard')\n    }, 2000);\n  } else {\n    dispatch({ type: \"LOGIN_FAILURE\" });\n    setError(true);\n    setIsLoading(false);\n  }\n}\n\nfunction signOut(dispatch, history) {\n  localStorage.removeItem(\"id_token\");\n  dispatch({ type: \"SIGN_OUT_SUCCESS\" });\n  history.push(\"/login\");\n}\n"]},"metadata":{},"sourceType":"module"}