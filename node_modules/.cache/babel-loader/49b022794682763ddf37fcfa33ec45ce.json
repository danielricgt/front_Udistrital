{"ast":null,"code":"var _jsxFileName = \"/Users/charlyagudelo/Documents/proyDanny/front_Udistrital/src/context/UserContext.js\";\nimport React from \"react\";\nimport firebase from \"../components/database/firebase\";\nimport { config } from \"../components/config/config\";\nvar UserStateContext = React.createContext();\nvar UserDispatchContext = React.createContext();\nvar showName, showIdentification, showEmail, showDependence, showDependenceName, showCampus, showCampus;\nvar goods, type, campus;\nvar dependence;\n\nfunction userReducer(state, action) {\n  switch (action.type) {\n    case \"LOGIN_SUCCESS\":\n      return { ...state,\n        isAuthenticated: true\n      };\n\n    case \"SIGN_OUT_SUCCESS\":\n      return { ...state,\n        isAuthenticated: false\n      };\n\n    default:\n      {\n        throw new Error(`Unhandled action type: ${action.type}`);\n      }\n  }\n}\n\nfunction UserProvider({\n  children\n}) {\n  var [state, dispatch] = React.useReducer(userReducer, {\n    isAuthenticated: !!localStorage.getItem(\"id_token\")\n  });\n  return /*#__PURE__*/React.createElement(UserStateContext.Provider, {\n    value: state,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(UserDispatchContext.Provider, {\n    value: dispatch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 7\n    }\n  }, children));\n}\n\nfunction useUserState() {\n  var context = React.useContext(UserStateContext);\n\n  if (context === undefined) {\n    throw new Error(\"useUserState must be used within a UserProvider\");\n  }\n\n  return context;\n}\n\nfunction useUserDispatch() {\n  var context = React.useContext(UserDispatchContext);\n\n  if (context === undefined) {\n    throw new Error(\"useUserDispatch must be used within a UserProvider\");\n  }\n\n  return context;\n}\n\nexport { UserProvider, useUserState, useUserDispatch, userLogin, userRegistry, userRegistrySave, signOut, showName, showIdentification, showEmail, dependence, showDependence, showDependenceName, campus, showCampus, saveGood, getDependenceByFk, goods }; // -----٩(˘◡˘)۶------\n\nfunction userLogin(dispatch, email, password, history, setIsLoading, setError, setAnswer) {\n  if (email === \"\" && password === \"\") {\n    setError(true);\n  } else {\n    setError(false);\n    setIsLoading(true);\n    firebase.auth().signInWithEmailAndPassword(email, password).then(res => {\n      console.log(res.user);\n      showName = res.user.displayName;\n      showEmail = res.user.email;\n      console.log(\"User logged-in successfully!\");\n      getUser(showEmail, history, setIsLoading, setError, setAnswer, dispatch);\n    }).catch(error => {\n      setError(true);\n      setIsLoading(false);\n      setAnswer(true);\n      console.log(error);\n    });\n  }\n} //Profile Validation\n\n\nfunction validateUser(cargo, history) {\n  if (cargo == 1) {\n    history.push(\"app/dashboard\");\n  }\n} //Registry\n\n\nfunction userRegistry(setIsLoading, history) {\n  setIsLoading(true);\n  getCampus(setIsLoading, history); //getDependences(setIsLoading, history);\n}\n\nasync function userRegistrySave(identification, name, lastname, email, password, password2, history, setIsLoading, setError, setAnswer) {\n  try {\n    setError(false);\n    setIsLoading(true);\n    let response = await fetch(`${config.APIFireBase}/api/user`, {\n      crossDomain: true,\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n        \"Access-Control-Allow-Origin\": \"*\",\n        \"Access-Control-Allow-Methods\": \"DELETE, POST, GET, OPTIONS\"\n      },\n      body: JSON.stringify({\n        id: identification,\n        name: name,\n        lastname: lastname,\n        email: email,\n        password: password,\n        fk_dependence: \"0hSRJuu0Zrwq0w0euTyH\"\n      })\n    }, {\n      mode: \"cors\"\n    });\n    let json = await response;\n    type = \"Registro\";\n    responseApi(json, setIsLoading, setError, setAnswer, history, type);\n  } catch (error) {\n    setError(true);\n    setAnswer(true);\n    console.error(error);\n  }\n}\n\nfunction responseApi(res, setIsLoading, setError, setAnswer, history, type) {\n  console.log(\"esto es la respuesta\", res.description, res.json());\n\n  if (typeof res.error !== \"undefined\") {\n    setIsLoading(false);\n    setError(true);\n    console.log(\"Upps!\", res.error);\n  } else {\n    if (typeof res.status === \"undefined\" || res.status !== 200) {\n      setIsLoading(false);\n      setError(true);\n      setAnswer(true);\n      console.log(JSON.stringify(res));\n      console.log(\"Upps!\", \"Algo pasó, intenta de nuevo\");\n    } else {\n      if (res.status == 200) {\n        setError(null);\n        setIsLoading(false);\n\n        if (type == \"Registro\") {\n          history.push(\"/\");\n        } else {\n          if (type == \"Bienes\") {\n            history.push(\"/app/dashboard\");\n          }\n        }\n\n        console.log(\"respuesta!!!!!!!!!\", res);\n      } else {\n        setError(true);\n        setIsLoading(false);\n        setAnswer(true);\n        console.log(\"Upps!\", \"Algo pasó intenta de nuevo\", res);\n      }\n    }\n  }\n}\n\nasync function saveGood(nameGood, description, idPlate, place, physical_space, brand_and_serie, state, reason, history, setIsLoading, setError, setAnswer) {\n  try {\n    setError(false);\n    setIsLoading(true);\n    let response = await fetch(`${config.APIFireBase}/api/good`, {\n      crossDomain: true,\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n        \"Access-Control-Allow-Origin\": \"*\",\n        \"Access-Control-Allow-Methods\": \"DELETE, POST, GET, OPTIONS\"\n      },\n      body: JSON.stringify({\n        name: nameGood,\n        description: description,\n        idPlate: idPlate,\n        place: place,\n        fk_dependence: showDependence,\n        physical_space: physical_space,\n        brand_and_serie: brand_and_serie,\n        state: state,\n        reason: reason\n      })\n    }, {\n      mode: \"cors\"\n    });\n    let json = await response;\n    type = \"Bienes\";\n    responseApi(json, setIsLoading, setError, setAnswer, history, type);\n  } catch (error) {\n    setError(true);\n    setAnswer(true);\n    console.error(error);\n  }\n}\n/** \nfunction getDependenceByFk(setIsLoading, history) {\n  try {\n    fetch(\n      `${config.APIFireBase}/api/dependence?id=${showDependence}`,\n      {\n        crossDomain: true,\n        method: \"GET\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n          \"Access-Control-Allow-Origin\": \"*\",\n          \"Access-Control-Allow-Methods\": \"DELETE, POST, GET, OPTIONS\",\n        },\n      },\n      { mode: \"cors\" }\n    )\n      .then((resp) => resp.json())\n      .then(function (data) {\n        setIsLoading(false);\n        showDependenceName = data.dependence_name;\n        console.log(\"Super infoooooooo-->\",showDependenceName, data);\n        history.push(\"/app/dashboard\");\n      })\n      .catch(function (error) {\n        setIsLoading(false);\n        console.log(error);\n      });\n  } catch (error) {\n    console.error(error);\n  }\n}\n**/\n// -----٩(˘◡˘)۶------\n\n\nasync function getDependenceByFk(idDependence) {\n  try {\n    fetch(`${config.APIGraphql}`, {\n      crossDomain: true,\n      method: \"post\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n        \"Access-Control-Allow-Origin\": \"*\",\n        \"Access-Control-Allow-Methods\": \"DELETE, POST, GET, OPTIONS\"\n      },\n      body: JSON.stringify({\n        query: `\n          query MyQuery {\n            depedencia(where: {fk_sede: {_eq: ${idDependence}}}) {\n              fk_sede\n              id\n              nombre_dependencia\n            }\n          }\n          `\n      })\n    }, {\n      mode: \"cors\"\n    }).then(resp => resp.json()).then(function (data) {\n      //setIsLoading(false);\n      showDependenceName = data.data.depedencia;\n      dependence = showDependence;\n      console.log(\"dependencia\", idDependence);\n      console.log(\"Super infoooooooo-->\", data.data.depedencia); //history.push(\"/registry\");\n      // history.push(\"/app/dashboard\");\n    }).catch(function (error) {\n      //setIsLoading(false);\n      console.log(error);\n    });\n  } catch (error) {\n    console.error(error);\n  }\n} // -----٩(˘◡˘)۶------\n\n\nfunction getCampus(setIsLoading, history) {\n  try {\n    fetch(`${config.APIGraphql}`, {\n      crossDomain: true,\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n        \"Access-Control-Allow-Origin\": \"*\",\n        \"Access-Control-Allow-Methods\": \"DELETE, POST, GET, OPTIONS\"\n      },\n      body: JSON.stringify({\n        query: `\n          query MyQuery {\n            sede {\n              id\n              nombre\n            }\n          }\n          `\n      })\n    }, {\n      mode: \"cors\"\n    }).then(resp => resp.json()).then(function (data) {\n      setIsLoading(false);\n      campus = data.data.sede;\n      console.log(\"THE DATA OF CAMPUS: \", campus);\n      history.push(\"/registry\");\n    }).catch(function (error) {\n      setIsLoading(false);\n      console.log(error);\n    });\n  } catch (error) {\n    console.log(\"something happend\");\n  }\n}\n\nfunction getDependences(setIsLoading, history) {\n  try {\n    fetch(`${config.APIFireBase}/api/dependencies`, {\n      crossDomain: true,\n      method: \"GET\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n        \"Access-Control-Allow-Origin\": \"*\",\n        \"Access-Control-Allow-Methods\": \"DELETE, POST, GET, OPTIONS\"\n      }\n    }, {\n      mode: \"cors\"\n    }).then(resp => resp.json()).then(function (data) {\n      setIsLoading(false);\n      dependence = data;\n      console.log(\"DEPENDENCE\", dependence);\n      history.push(\"/registry\");\n    }).catch(function (error) {\n      setIsLoading(false);\n      console.log(error);\n    }); //responseApi(json, setIsLoading,setError, setAnswer,history);\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nfunction getGoods(setIsLoading, history) {\n  try {\n    fetch(`${config.APIFireBase}/api/goods?id=${showDependence}`, {\n      crossDomain: true,\n      method: \"GET\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n        \"Access-Control-Allow-Origin\": \"*\",\n        \"Access-Control-Allow-Methods\": \"DELETE, POST, GET, OPTIONS\"\n      }\n    }, {\n      mode: \"cors\"\n    }).then(resp => resp.json()).then(function (data) {\n      goods = data;\n      console.log(goods);\n      getDependenceByFk(setIsLoading, history);\n    }).catch(function (error) {\n      setIsLoading(false);\n      console.log(error);\n    }); //responseApi(json, setIsLoading,setError, setAnswer,history);\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nfunction getUser(showEmail, history, setIsLoading, setError, setAnswer, dispatch) {\n  try {\n    fetch(`${config.APIGraphql}`, {\n      crossDomain: true,\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n        \"Access-Control-Allow-Origin\": \"*\",\n        \"Access-Control-Allow-Methods\": \"DELETE, POST, GET, OPTIONS\"\n      },\n      body: JSON.stringify({\n        query: `\n          query MyQuery {\n            usuario(where: { correo:{_eq: \"${showEmail}\"}}) {\n              nombres\n              apellidos\n              correo\n              estado\n              fk_cargo\n              fk_dependencia\n              id\n            }\n          }\n          `\n      })\n    }, {\n      mode: \"cors\"\n    }).then(resp => resp.json()).then(function (data) {\n      console.log(\"email\", showEmail);\n      showIdentification = data.data.usuario[0].id;\n      typeUser = data.data.usuario[0].fk_cargo; //showDependence = data.userInfo.fk_dependence;\n\n      console.log(showIdentification);\n      console.log(\"Usuario obtenido\", data, showEmail);\n      setError(null);\n      setIsLoading(false);\n      dispatch({\n        type: \"LOGIN_SUCCESS\"\n      }); // getGoods(setIsLoading, history);\n      // history.push(\"/app/dashboard\");\n    }).catch(function (error) {\n      console.log(error);\n    });\n  } catch (error) {\n    console.error(error);\n  }\n}\n/** \nfunction getUser(\n  showEmail,\n  history,\n  setIsLoading,\n  setError,\n  setAnswer,\n  dispatch\n) {\n  try {\n    fetch(\n      `${config.APIFireBase}/api/user?email=${showEmail}`,\n      {\n        crossDomain: true,\n        method: \"GET\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n          \"Access-Control-Allow-Origin\": \"*\",\n          \"Access-Control-Allow-Methods\": \"DELETE, POST, GET, OPTIONS\",\n        },\n      },\n      { mode: \"cors\" }\n    )\n      .then((resp) => resp.json())\n      .then(function (data) {\n        showIdentification = data.userInfo.id;\n        showDependence = data.userInfo.fk_dependence;\n        console.log(showIdentification);\n        console.log(\"Usuario obtenido\", data, showEmail);\n        setError(null);\n        setIsLoading(false);\n        dispatch({ type: \"LOGIN_SUCCESS\" });\n       // getGoods(setIsLoading, history);\n       // history.push(\"/app/dashboard\");\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n  } catch (error) {\n    console.error(error);\n  }\n}\n**/\n\n\nfunction signOut(dispatch, history) {\n  localStorage.removeItem(\"id_token\");\n  dispatch({\n    type: \"SIGN_OUT_SUCCESS\"\n  });\n  history.push(\"/login\");\n}","map":{"version":3,"sources":["/Users/charlyagudelo/Documents/proyDanny/front_Udistrital/src/context/UserContext.js"],"names":["React","firebase","config","UserStateContext","createContext","UserDispatchContext","showName","showIdentification","showEmail","showDependence","showDependenceName","showCampus","goods","type","campus","dependence","userReducer","state","action","isAuthenticated","Error","UserProvider","children","dispatch","useReducer","localStorage","getItem","useUserState","context","useContext","undefined","useUserDispatch","userLogin","userRegistry","userRegistrySave","signOut","saveGood","getDependenceByFk","email","password","history","setIsLoading","setError","setAnswer","auth","signInWithEmailAndPassword","then","res","console","log","user","displayName","getUser","catch","error","validateUser","cargo","push","getCampus","identification","name","lastname","password2","response","fetch","APIFireBase","crossDomain","method","headers","Accept","body","JSON","stringify","id","fk_dependence","mode","json","responseApi","description","status","nameGood","idPlate","place","physical_space","brand_and_serie","reason","idDependence","APIGraphql","query","resp","data","depedencia","sede","getDependences","getGoods","usuario","typeUser","fk_cargo","removeItem"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport firebase from \"../components/database/firebase\";\nimport { config } from \"../components/config/config\";\n\nvar UserStateContext = React.createContext();\nvar UserDispatchContext = React.createContext();\nvar showName, showIdentification, showEmail, showDependence, showDependenceName, showCampus, showCampus;\nvar  goods, type, campus;\nvar dependence;\nfunction userReducer(state, action) {\n  switch (action.type) {\n    case \"LOGIN_SUCCESS\":\n      return { ...state, isAuthenticated: true };\n    case \"SIGN_OUT_SUCCESS\":\n      return { ...state, isAuthenticated: false };\n    default: {\n      throw new Error(`Unhandled action type: ${action.type}`);\n    }\n  }\n}\n\nfunction UserProvider({ children }) {\n  var [state, dispatch] = React.useReducer(userReducer, {\n    isAuthenticated: !!localStorage.getItem(\"id_token\"),\n  });\n\n  return (\n    <UserStateContext.Provider value={state}>\n      <UserDispatchContext.Provider value={dispatch}>\n        {children}\n      </UserDispatchContext.Provider>\n    </UserStateContext.Provider>\n  );\n}\n\nfunction useUserState() {\n  var context = React.useContext(UserStateContext);\n  if (context === undefined) {\n    throw new Error(\"useUserState must be used within a UserProvider\");\n  }\n  return context;\n}\n\nfunction useUserDispatch() {\n  var context = React.useContext(UserDispatchContext);\n  if (context === undefined) {\n    throw new Error(\"useUserDispatch must be used within a UserProvider\");\n  }\n  return context;\n}\n\nexport {\n  UserProvider,\n  useUserState,\n  useUserDispatch,\n  userLogin,\n  userRegistry,\n  userRegistrySave,\n  signOut,\n  showName,\n  showIdentification,\n  showEmail,\n  dependence,\n  showDependence,\n  showDependenceName,\n  campus,\n  showCampus,\n  saveGood,\n  getDependenceByFk,\n  goods\n};\n\n// -----٩(˘◡˘)۶------\n\nfunction userLogin(\n  dispatch,\n  email,\n  password,\n  history,\n  setIsLoading,\n  setError,\n  setAnswer\n) {\n  if (email === \"\" && password === \"\") {\n    setError(true);\n  } else {\n    setError(false);\n    setIsLoading(true);\n    firebase\n      .auth()\n      .signInWithEmailAndPassword(email, password)\n      .then((res) => {\n        console.log(res.user);\n        showName = res.user.displayName;\n        showEmail = res.user.email;\n        console.log(\"User logged-in successfully!\");\n        getUser(\n          showEmail,\n          history,\n          setIsLoading,\n          setError,\n          setAnswer,\n          dispatch\n        );\n      })\n      .catch((error) => {\n        setError(true);\n        setIsLoading(false);\n        setAnswer(true);\n        console.log(error);\n      });\n  }\n}\n\n//Profile Validation\n\nfunction validateUser(cargo, history){\n  if (cargo==1){\n    history.push(\"app/dashboard\")\n  }\n}\n\n//Registry\n\nfunction userRegistry(setIsLoading, history) {\n  setIsLoading(true);\n  getCampus(setIsLoading, history);\n  //getDependences(setIsLoading, history);\n}\n\n\nasync function userRegistrySave(\n  identification,\n  name,\n  lastname,\n  email,\n  password,\n  password2,\n  history,\n  setIsLoading,\n  setError,\n  setAnswer\n) {\n  try {\n    setError(false);\n    setIsLoading(true);\n    let response = await fetch(\n      `${config.APIFireBase}/api/user`,\n      {\n        crossDomain: true,\n        method: \"POST\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n          \"Access-Control-Allow-Origin\": \"*\",\n          \"Access-Control-Allow-Methods\": \"DELETE, POST, GET, OPTIONS\",\n        },\n\n        body: JSON.stringify({\n          id: identification,\n          name: name,\n          lastname: lastname,\n          email: email,\n          password: password,\n          fk_dependence: \"0hSRJuu0Zrwq0w0euTyH\",\n        }),\n      },\n      { mode: \"cors\" }\n    );\n    let json = await response;\n    type=\"Registro\";\n    responseApi(json, setIsLoading, setError, setAnswer, history, type);\n  } catch (error) {\n    setError(true);\n    setAnswer(true);\n    console.error(error);\n  }\n}\n\nfunction responseApi(res, setIsLoading, setError, setAnswer, history, type) {\n  console.log(\"esto es la respuesta\", res.description, res.json());\n  if (typeof res.error !== \"undefined\") {\n    setIsLoading(false);\n    setError(true);\n    console.log(\"Upps!\", res.error);\n  } else {\n    if (typeof res.status === \"undefined\" || res.status !== 200) {\n      setIsLoading(false);\n      setError(true);\n      setAnswer(true);\n      console.log(JSON.stringify(res));\n      console.log(\"Upps!\", \"Algo pasó, intenta de nuevo\");\n    } else {\n      if (res.status == 200) {\n        setError(null);\n        setIsLoading(false);\n        if(type==\"Registro\"){\n          history.push(\"/\");\n        }else{\n          if(type == \"Bienes\"){\n            history.push(\"/app/dashboard\")\n          }\n        }\n        console.log(\"respuesta!!!!!!!!!\", res);\n      } else {\n        setError(true);\n        setIsLoading(false);\n        setAnswer(true);\n        console.log(\"Upps!\", \"Algo pasó intenta de nuevo\", res);\n      }\n    }\n  }\n}\n\nasync function saveGood(\n  nameGood,\n  description,\n  idPlate,\n  place,\n  physical_space,\n  brand_and_serie,\n  state,\n  reason,\n  history,\n  setIsLoading,\n  setError,\n  setAnswer\n) {\n  try {\n    setError(false);\n    setIsLoading(true);\n    let response = await fetch(\n      `${config.APIFireBase}/api/good`,\n      {\n        crossDomain: true,\n        method: \"POST\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n          \"Access-Control-Allow-Origin\": \"*\",\n          \"Access-Control-Allow-Methods\": \"DELETE, POST, GET, OPTIONS\",\n        },\n\n        body: JSON.stringify({\n          name: nameGood,\n          description: description,\n          idPlate: idPlate,\n          place: place,\n          fk_dependence: showDependence,\n          physical_space: physical_space,\n          brand_and_serie: brand_and_serie,\n          state: state,\n          reason: reason,\n        }),\n      },\n      { mode: \"cors\" }\n    );\n    let json = await response;\n    type=\"Bienes\";\n    responseApi(json, setIsLoading, setError, setAnswer, history, type);\n  } catch (error) {\n    setError(true);\n    setAnswer(true);\n    console.error(error);\n  }\n}\n/** \nfunction getDependenceByFk(setIsLoading, history) {\n  try {\n    fetch(\n      `${config.APIFireBase}/api/dependence?id=${showDependence}`,\n      {\n        crossDomain: true,\n        method: \"GET\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n          \"Access-Control-Allow-Origin\": \"*\",\n          \"Access-Control-Allow-Methods\": \"DELETE, POST, GET, OPTIONS\",\n        },\n      },\n      { mode: \"cors\" }\n    )\n      .then((resp) => resp.json())\n      .then(function (data) {\n        setIsLoading(false);\n        showDependenceName = data.dependence_name;\n        console.log(\"Super infoooooooo-->\",showDependenceName, data);\n        history.push(\"/app/dashboard\");\n      })\n      .catch(function (error) {\n        setIsLoading(false);\n        console.log(error);\n      });\n  } catch (error) {\n    console.error(error);\n  }\n}\n**/\n\n// -----٩(˘◡˘)۶------\n\nasync function getDependenceByFk(idDependence) {\n  try {\n    fetch(\n      `${config.APIGraphql}`,\n      {\n        crossDomain: true,\n        method: \"post\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n          \"Access-Control-Allow-Origin\": \"*\",\n          \"Access-Control-Allow-Methods\": \"DELETE, POST, GET, OPTIONS\",\n        },\n        body: JSON.stringify({\n          query: `\n          query MyQuery {\n            depedencia(where: {fk_sede: {_eq: ${idDependence}}}) {\n              fk_sede\n              id\n              nombre_dependencia\n            }\n          }\n          `\n        }),\n      },\n      { mode: \"cors\" }\n    )\n      .then((resp) => resp.json())\n      .then(function (data) {\n        //setIsLoading(false);\n        showDependenceName = data.data.depedencia;\n        dependence=showDependence;\n        console.log(\"dependencia\", idDependence)\n        console.log(\"Super infoooooooo-->\", data.data.depedencia);\n        //history.push(\"/registry\");\n       // history.push(\"/app/dashboard\");\n      })\n      .catch(function (error) {\n        //setIsLoading(false);\n        console.log(error);\n      });\n  } catch (error) {\n    console.error(error);\n  }\n}\n\n// -----٩(˘◡˘)۶------\n\nfunction getCampus(setIsLoading,history) {\n  try {\n    fetch(\n      `${config.APIGraphql}`,\n      {\n        crossDomain: true,\n        method: \"POST\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n          \"Access-Control-Allow-Origin\": \"*\",\n          \"Access-Control-Allow-Methods\": \"DELETE, POST, GET, OPTIONS\",\n        },\n        body: JSON.stringify({\n          query: `\n          query MyQuery {\n            sede {\n              id\n              nombre\n            }\n          }\n          `\n        }),\n      },\n      { mode: \"cors\" }\n    )\n      .then((resp) => resp.json())\n      .then(function (data) {\n        setIsLoading(false);\n        campus = data.data.sede;\n        console.log(\"THE DATA OF CAMPUS: \",campus);\n       history.push(\"/registry\");\n      })\n      .catch(function (error) {\n        setIsLoading(false);\n        console.log(error);\n      });\n  } catch (error) {\n    console.log(\"something happend\")\n  }\n}\nfunction getDependences(setIsLoading, history) {\n  try {\n    fetch(\n      `${config.APIFireBase}/api/dependencies`,\n      {\n        crossDomain: true,\n        method: \"GET\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n          \"Access-Control-Allow-Origin\": \"*\",\n          \"Access-Control-Allow-Methods\": \"DELETE, POST, GET, OPTIONS\",\n        },\n      },\n      { mode: \"cors\" }\n    )\n      .then((resp) => resp.json())\n      .then(function (data) {\n        setIsLoading(false);\n        dependence = data;\n        console.log(\"DEPENDENCE\",dependence);\n        history.push(\"/registry\");\n      })\n      .catch(function (error) {\n        setIsLoading(false);\n        console.log(error);\n      });\n    //responseApi(json, setIsLoading,setError, setAnswer,history);\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nfunction getGoods(setIsLoading, history) {\n  try {\n    fetch(\n      `${config.APIFireBase}/api/goods?id=${showDependence}`,\n      {\n        crossDomain: true,\n        method: \"GET\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n          \"Access-Control-Allow-Origin\": \"*\",\n          \"Access-Control-Allow-Methods\": \"DELETE, POST, GET, OPTIONS\",\n        },\n      },\n      { mode: \"cors\" }\n    )\n      .then((resp) => resp.json())\n      .then(function (data) {\n        goods = data;\n        console.log(goods);\n        getDependenceByFk(setIsLoading, history)\n      })\n      .catch(function (error) {\n        setIsLoading(false);\n        console.log(error);\n      });\n    //responseApi(json, setIsLoading,setError, setAnswer,history);\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nfunction getUser(\n  showEmail,\n  history,\n  setIsLoading,\n  setError,\n  setAnswer,\n  dispatch\n) {\n  try {\n\n    fetch(\n      `${config.APIGraphql}`,\n      {\n        crossDomain: true,\n        method: \"POST\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n          \"Access-Control-Allow-Origin\": \"*\",\n          \"Access-Control-Allow-Methods\": \"DELETE, POST, GET, OPTIONS\",\n        },\n        body: JSON.stringify({\n          query: \n          `\n          query MyQuery {\n            usuario(where: { correo:{_eq: \"${showEmail}\"}}) {\n              nombres\n              apellidos\n              correo\n              estado\n              fk_cargo\n              fk_dependencia\n              id\n            }\n          }\n          `         \n        }),\n      },\n      { mode: \"cors\" }\n    )\n      .then((resp) => resp.json())\n      .then(function (data) {\n        console.log(\"email\", showEmail)\n        showIdentification = data.data.usuario[0].id;\n        typeUser = data.data.usuario[0].fk_cargo\n        //showDependence = data.userInfo.fk_dependence;\n        console.log(showIdentification);\n        console.log(\"Usuario obtenido\", data, showEmail);\n        setError(null);\n        setIsLoading(false);\n        dispatch({ type: \"LOGIN_SUCCESS\" });\n       // getGoods(setIsLoading, history);\n       // history.push(\"/app/dashboard\");\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n  } catch (error) {\n    console.error(error);\n  }\n}\n\n/** \nfunction getUser(\n  showEmail,\n  history,\n  setIsLoading,\n  setError,\n  setAnswer,\n  dispatch\n) {\n  try {\n    fetch(\n      `${config.APIFireBase}/api/user?email=${showEmail}`,\n      {\n        crossDomain: true,\n        method: \"GET\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n          \"Access-Control-Allow-Origin\": \"*\",\n          \"Access-Control-Allow-Methods\": \"DELETE, POST, GET, OPTIONS\",\n        },\n      },\n      { mode: \"cors\" }\n    )\n      .then((resp) => resp.json())\n      .then(function (data) {\n        showIdentification = data.userInfo.id;\n        showDependence = data.userInfo.fk_dependence;\n        console.log(showIdentification);\n        console.log(\"Usuario obtenido\", data, showEmail);\n        setError(null);\n        setIsLoading(false);\n        dispatch({ type: \"LOGIN_SUCCESS\" });\n       // getGoods(setIsLoading, history);\n       // history.push(\"/app/dashboard\");\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n  } catch (error) {\n    console.error(error);\n  }\n}\n**/\nfunction signOut(dispatch, history) {\n  localStorage.removeItem(\"id_token\");\n  dispatch({ type: \"SIGN_OUT_SUCCESS\" });\n  history.push(\"/login\");\n}\n"]},"metadata":{},"sourceType":"module"}